Uncle Bogdan and Country Happiness                    

httpscodeforcescomproblemsetproblem1388C

dfs and similar

1800

Uncle Bogdan is in captain Flints crew for a long time and sometimes gets nostalgic for his homeland Today he told you how his country introduced a happiness indexThere are n cities and n1 undirected roads connecting pairs of cities Citizens of any city can reach any other city traveling by these roads Cities are numbered from 1 to n and the city 1 is a capital In other words the country has a tree structureThere are m citizens living in the country A pi people live in the ith city but all of them are working in the capital At evening all citizens return to their home cities using the shortest paths Every person has its own mood somebody leaves his workplace in good mood but somebody are already in bad mood Moreover any person can ruin his mood on the way to the hometown If person is in bad mood he wont improve itHappiness detectors are installed in each city to monitor the happiness of each person who visits the city The detector in the ith city calculates a happiness index hi as the number of people in good mood minus the number of people in bad mood Lets say for the simplicity that mood of a person doesnt change inside the cityHappiness detector is still in development so there is a probability of a mistake in judging a persons happiness One late evening when all citizens successfully returned home the government asked uncle Bogdan the best programmer of the country to check the correctness of the collected happiness indexesUncle Bogdan successfully solved the problem Can you do the sameMore formally You need to check Is it possible that after all people return home for each city i the happiness index will be equal exactly to hi