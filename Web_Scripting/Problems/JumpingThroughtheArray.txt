Jumping Through the Array                    

https://codeforces.com/problemset/problem/1588/F

binary search

3500

You are given an array of integers a of size n and a permutation p of size n. There are q queries of three types coming to you:  For given numbers l and r, calculate the sum in array a on the segment from l to r: \sum\limits_{i=l}^{r} a_i.  You are given two numbers v and x. Let's build a directed graph from the permutation p: it has n vertices and n edges i \to p_i. Let C be the set of vertices that are reachable from v in this graph. You should add x to all a_u such that u is in C.  You are given indices i and j. You should swap p_i and p_j.   The graph corresponding to the permutation [2, 3, 1, 5, 4]. Please, process all queries and print answers to queries of type 1.