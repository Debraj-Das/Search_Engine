Wet Shark and Flowers                    

httpscodeforcescomproblemsetproblem621C

combinatorics

1700

There are n sharks who grow flowers for Wet Shark They are all sitting around the table such that sharks i and i1 are neighbours for all i from 1 to n1 Sharks n and 1 are neighbours tooEach shark will grow some number of flowers si For ith shark value si is random integer equiprobably chosen in range from li to ri Wet Shark has its favourite prime number p and he really likes it If for any pair of neighbouring sharks i and j the product sisj is divisible by p then Wet Shark becomes happy and gives 1000 dollars to each of these sharksAt the end of the day sharks sum all the money Wet Shark granted to them Find the expectation of this value