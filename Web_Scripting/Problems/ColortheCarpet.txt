Color the Carpet                    

httpscodeforcescomproblemsetproblem297D

constructive algorithms

2500

Even polar bears feel cold when lying on the ice Therefore a polar bear Alice is going to make a carpet The carpet can be viewed as a grid with height h and width w Then the grid is divided into hw squares Alice is going to assign one of k different colors to each square The colors are numbered from 1 to k She may choose not to use all of the colorsHowever there are some restrictions For every two adjacent squares squares that shares an edge x and y there is a color constraint in one of the forms   colorxcolory or  colorxcolory Example of the color constraints  Ideally Alice wants to satisfy all color constraints But again life in the Arctic is hard It is not always possible to satisfy all color constraints Fortunately she will still be happy if at least  of the color constraints are satisfied If she has 4 colors she can color the carpet in the following way  And she is happy because  of the color constraints are satisfied and  Your task is to help her color the carpet