Mr Kitayuta the Treasure Hunter                    

httpscodeforcescomproblemsetproblem505C

dfs and similar

1900

The Shuseki Islands are an archipelago of 30001 small islands in the Yutampo Sea The islands are evenly spaced along a line numbered from 0 to 30000 from the west to the east These islands are known to contain many treasures There are n gems in the Shuseki Islands in total and the ith gem is located on island piMr Kitayuta has just arrived at island 0 With his great jumping ability he will repeatedly perform jumps between islands to the east according to the following process   First he will jump from island 0 to island d  After that he will continue jumping according to the following rule Let l be the length of the previous jump that is if his previous jump was from island prev to island cur let lcurprev He will perform a jump of length l1 l or l1 to the east That is he will jump to island curl1 curl or curl1 if they exist The length of a jump must be positive that is he cannot perform a jump of length 0 when l1 If there is no valid destination he will stop jumping Mr Kitayuta will collect the gems on the islands visited during the process Find the maximum number of gems that he can collect