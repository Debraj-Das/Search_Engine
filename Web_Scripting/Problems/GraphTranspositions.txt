Graph Transpositions                    

https://codeforces.com/problemset/problem/1442/C

dfs and similar

2400

You are given a directed graph of n vertices and m edges. Vertices are numbered from 1 to n. There is a token in vertex 1.The following actions are allowed:   Token movement. To move the token from vertex u to vertex v if there is an edge u \to v in the graph. This action takes 1 second.  Graph transposition. To transpose all the edges in the graph: replace each edge u \to v by an edge v \to u. This action takes increasingly more time: k-th transposition takes 2^{k-1} seconds, i.e. the first transposition takes 1 second, the second one takes 2 seconds, the third one takes 4 seconds, and so on. The goal is to move the token from vertex 1 to vertex n in the shortest possible time. Print this time modulo 998\,244\,353.