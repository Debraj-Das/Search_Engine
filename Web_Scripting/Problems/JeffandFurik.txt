Jeff and Furik                    

httpscodeforcescomproblemsetproblem351B

combinatorics

1900

Jeff has become friends with Furik Now these two are going to play one quite amusing gameAt the beginning of the game Jeff takes a piece of paper and writes down a permutation consisting of n numbers p1 p2  pn Then the guys take turns to make moves Jeff moves first During his move Jeff chooses two adjacent permutation elements and then the boy swaps them During his move Furic tosses a coin and if the coin shows heads he chooses a random pair of adjacent elements with indexes i and i1 for which an inequality pipi1 holds and swaps them But if the coin shows tails Furik chooses a random pair of adjacent elements with indexes i and i1 for which the inequality pipi1 holds and swaps them If the coin shows heads or tails and Furik has multiple ways of adjacent pairs to take then he uniformly takes one of the pairs If Furik doesnt have any pair to take he tosses a coin one more time The game ends when the permutation is sorted in the increasing orderJeff wants the game to finish as quickly as possible that is he wants both players to make as few moves as possible Help Jeff find the minimum mathematical expectation of the number of moves in the game if he moves optimally wellYou can consider that the coin shows the heads or tails with the probability of 50 percent