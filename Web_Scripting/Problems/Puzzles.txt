Puzzles                    

httpscodeforcescomproblemsetproblem696B

dfs and similar

1700

Barney lives in country USC United States of Charzeh USC has n cities numbered from 1 through n and n1 roads between them Cities and roads of USC form a rooted tree Barneys not sure why it is rooted Root of the tree is the city number 1 Thus if one will start his journey from city 1 he can visit any city he wants by following roads  Some girl has stolen Barneys heart and Barney wants to find her He starts looking for in the root of the tree and since he is Barney Stinson not a random guy he uses a random DFS to search in the cities A pseudo code of this algorithm is as followslet startingtime be an array of length ncurrenttime  0dfsvcurrenttime  currenttime  1startingtimev  currenttimeshuffle childrenv randomly each permutation with equal possibility childrenv is vector of children cities of city vfor u in childrenvdfsuAs told before Barney will start his journey in the root of the tree equivalent to call dfs1Now Barney needs to pack a backpack and so he wants to know more about his upcoming journey for every city i Barney wants to know the expected value of startingtimei Hes a friend of Jon Snow and knows nothing thats why he asked for your help