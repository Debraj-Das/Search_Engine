Train Car Selection                    

https://codeforces.com/problemset/problem/1137/E

data structures

2700

Vasya likes to travel by train, but doesn't like when the car he travels in is located in the tail of the train.Vasya gets on the train at the station. The train consists of n cars indexed from 1 to n counting from the locomotive (head of the train). Three types of events occur while the train is moving:  Some number of cars are added to the head of the train;  Some number of cars are added to the tail of the train;  Vasya recalculates the values of the convenience of the cars (read more about it below). At each moment of time we will index the cars from the head of the train, starting from 1. Note that when adding new cars to the head of the train, the indexing of the old ones may shift.To choose which car to go in, Vasya will use the value A_i for each car (where i is a car index), which is calculated as follows:  At the beginning of the trip A_i=0, as well as for the new cars at the time of their addition.  During the next recalculation Vasya chooses some positive integers b and s and adds to all A_i value b + (i - 1) \cdot s. Vasya hasn't decided yet where he will get on the train and where will get off the train, so after each event of one of the three types he wants to know the least index of the car, such that its value A_i is minimal. Since there is a lot of cars, Vasya asked you to write a program that answers his question.