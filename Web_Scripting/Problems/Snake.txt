Snake                    

httpscodeforcescomproblemsetproblem225D

bitmasks

2200

Let us remind you the rules of a very popular game called Snake or sometimes Boa Python or WormThe game field is represented by an nm rectangular table Some squares of the field are considered impassable walls all other squares of the fields are passableYou control a snake the snake consists of segments Each segment takes up exactly one passable square of the field but any passable square contains at most one segment All segments are indexed by integers from 1 to k where k is the snakes length The 1th segment is the head and the kth segment is the tail For any i 1ik segments with indexes i and i1 are located in the adjacent squares of the field that is these squares share a common sideOne of the passable field squares contains an apple The snakes aim is to reach the apple and eat it that is to position its head in the square with the appleThe snake moves throughout the game During one move the snake can move its head to an adjacent field square All other segments follow the head That is each segment number i 1ik moves to the square that has just had segment number i1 Consider that all segments including the head move simultaneously see the second test sample If the snakes head moves to an unpassable square or to the square occupied by its other segment the snake dies Thats why we will consider such moves unvalidYour task is to determine the minimum number of valid moves that the snake needs to reach the apple