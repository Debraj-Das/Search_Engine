Chip Play                    

httpscodeforcescomproblemsetproblem89C

brute force

2300

Lets consider the following game We have a rectangular field nm in size Some squares of the field contain chipsEach chip has an arrow painted on it Thus each chip on the field points in one of the following directions up down left or rightThe player may choose a chip and make a move with itThe move is the following sequence of actions The chosen chip is marked as the current one After that the player checks whether there are more chips in the same row or in the same column with the current one that are pointed by the arrow on the current chip If there is at least one chip then the closest of them is marked as the new current chip and the former current chip is removed from the field After that the check is repeated This process can be repeated several times If a new chip is not found then the current chip is removed from the field and the players move endsBy the end of a move the player receives several points equal to the number of the deleted chipsBy the given initial chip arrangement determine the maximum number of points that a player can receive during one move Also determine the number of such moves