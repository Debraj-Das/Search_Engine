Three Swaps                    

httpscodeforcescomproblemsetproblem339E

constructive algorithms

2700

Xenia the horse breeder has n n1 horses that stand in a row Each horse has its own unique number Initially the ith left horse has number i That is the sequence of numbers of horses in a row looks as follows from left to right 1 2 3  nXenia trains horses before the performance During the practice sessions she consistently gives them commands Each command is a pair of numbers lr 1lrn The command lr means that the horses that are on the lth l1th l2th  rth places from the left must be rearranged The horses that initially stand on the lth and rth places will swap The horses on the l1th and r1th places will swap The horses on the l2th and r2th places will swap and so on In other words the horses that were on the segment lr change their order to the reverse oneFor example if Xenia commanded l2r5 and the sequence of numbers of horses before the command looked as 2 1 3 4 5 6 then after the command the sequence will be 2 5 4 3 1 6We know that during the practice Xenia gave at most three commands of the described form You have got the final sequence of numbers of horses by the end of the practice Find what commands Xenia gave during the practice Note that you do not need to minimize the number of commands in the solution find any valid sequence of at most three commands