Vasya and Good Sequences                    

https://codeforces.com/problemset/problem/1030/E

bitmasks

2000

Vasya has a sequence a consisting of n integers a_1, a_2, \dots, a_n. Vasya may pefrom the following operation: choose some number from the sequence and swap any pair of bits in its binary representation. For example, Vasya can transform number 6 (\dots 00000000110_2) into 3 (\dots 00000000011_2), 12 (\dots 000000001100_2), 1026 (\dots 10000000010_2) and many others. Vasya can use this operation any (possibly zero) number of times on any number from the sequence.Vasya names a sequence as good one, if, using operation mentioned above, he can obtain the sequence with bitwise exclusive or of all elements equal to 0.For the given sequence a_1, a_2, \ldots, a_n Vasya'd like to calculate number of integer pairs (l, r) such that 1 \le l \le r \le n and sequence a_l, a_{l + 1}, \dots, a_r is good.