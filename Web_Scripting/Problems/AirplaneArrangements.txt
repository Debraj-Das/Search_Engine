Airplane Arrangements                    

httpscodeforcescomproblemsetproblem838D

math

2700

There is an airplane which has n rows from front to back There will be m people boarding this airplaneThis airplane has an entrance at the very front and very back of the planeEach person has some assigned seat It is possible for multiple people to have the same assigned seat The people will then board the plane one by one starting with person 1 Each person can independently choose either the front entrance or back entrance to enter the planeWhen a person walks into the plane they walk directly to their assigned seat and will try to sit in it If it is occupied they will continue walking in the direction they walked in until they are at empty seat  they will take the earliest empty seat that they can find If they get to the end of the row without finding a seat they will be angryFind the number of ways to assign tickets to the passengers and board the plane without anyone getting angry Two ways are different if there exists a passenger who chose a different entrance in both ways or the assigned seat is different Print this count modulo 1097