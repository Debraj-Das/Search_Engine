Fragile Bridges                    

httpscodeforcescomproblemsetproblem201C

dp

2000

You are playing a video game and you have just reached the bonus level where the only possible goal is to score as many points as possible Being a perfectionist youve decided that you wont leave this level until youve gained the maximum possible number of points thereThe bonus level consists of n small platforms placed in a line and numbered from 1 to n from left to right and n1 bridges connecting adjacent platforms The bridges between the platforms are very fragile and for each bridge the number of times one can pass this bridge from one of its ends to the other before it collapses forever is known in advanceThe players actions are as follows First he selects one of the platforms to be the starting position for his hero After that the player can freely move the hero across the platforms moving by the undestroyed bridges As soon as the hero finds himself on a platform with no undestroyed bridge attached to it the level is automatically ended The number of points scored by the player at the end of the level is calculated as the number of transitions made by the hero between the platforms Note that if the hero started moving by a certain bridge he has to continue moving in the same direction until he is on a platformFind how many points you need to score to be sure that nobody will beat your record and move to the next level with a quiet heart