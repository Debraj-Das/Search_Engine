Mean Requests                    

httpscodeforcescomproblemsetproblem523B

special problem

1500

In this problem you will have to deal with a real algorithm that is used in the VK social networkAs in any other company that creates highloaded websites the VK developers have to deal with request statistics regularly An important indicator reflecting the load of the site is the mean number of requests for a certain period of time of T seconds for example T60seconds1min and T86400seconds1day For example if this value drops dramatically that shows that the site has access problem If this value grows that may be a reason to analyze the cause for the growth and add more servers to the website if it is really neededHowever even such a natural problem as counting the mean number of queries for some period of time can be a challenge when you process the amount of data of a huge social network Thats why the developers have to use original techniques to solve problems approximately but more effectively at the same timeLets consider the following formal model We have a service that works for n seconds We know the number of queries to this resource at at each moment of time t 1tn Lets formulate the following algorithm of calculating the mean with exponential decay Let c be some real number strictly larger than one setting this constant value correctly can adjust    the time range for which statistics will be calculateddouble c  some constant value  as the result of the algorithms performance this variable will contain  the mean number of queries for the last  T seconds by the current moment of timedouble mean  00 for t  1n  at each second we do the following     at is the number of queries that came at the last second    mean  mean  at  T  cThus the mean variable is recalculated each second using the number of queries that came at that second We can make some mathematical calculations and prove that choosing the value of constant c correctly will make the value of mean not very different from the real mean value ax at tT1xt The advantage of such approach is that it only uses the number of requests at the current moment of time and doesnt require storing the history of requests for a large time range Also it considers the recent values with the weight larger than the weight of the old ones which helps to react to dramatic change in values quickerHowever before using the new theoretical approach in industrial programming there is an obligatory step to make that is to test its credibility practically on given test data sets Your task is to compare the data obtained as a result of the work of an approximate algorithm to the real data You are given n values at integer T and real number c Also you are given m moments pj 1jm where we are interested in the mean value of the number of queries for the last T seconds Implement two algorithms The first one should calculate the required value by definition ie by the formula  The second algorithm should calculate the mean value as is described above Print both values and calculate the relative error of the second algorithm by the formula  where approx is the approximate value obtained by the second algorithm and real is the exact value obtained by the first algorithm