The Number of Subpermutations                    

https://codeforces.com/problemset/problem/1175/F

brute force

2500

You have an array a_1, a_2, \dots, a_n. Let's call some subarray a_l, a_{l + 1}, \dots , a_r of this array a subpermutation if it contains all integers from 1 to r-l+1 exactly once. For example, array a = [2, 2, 1, 3, 2, 3, 1] contains 6 subarrays which are subpermutations: [a_2 \dots a_3], [a_2 \dots a_4], [a_3 \dots a_3], [a_3 \dots a_5], [a_5 \dots a_7], [a_7 \dots a_7].You are asked to calculate the number of subpermutations.