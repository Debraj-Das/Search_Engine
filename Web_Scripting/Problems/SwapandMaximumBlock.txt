Swap and Maximum Block                    

httpscodeforcescomproblemsetproblem1716E

bitmasks

2500

You are given an array of length 2n The elements of the array are numbered from 1 to 2nYou have to process q queries to this array In the ith query you will be given an integer k 0 le k le n1 To process the query you should do the following  for every i in 1 2n2k in ascending order do the following if the ith element was already swapped with some other element during this query skip it otherwise swap ai and ai2k  after that print the maximum sum over all contiguous subsegments of the array including the empty subsegment For example if the array a is 3 5 3 2 8 20 6 1 and k  1 the query is processed as follows  the 1st element wasnt swapped yet so we swap it with the 3rd element  the 2nd element wasnt swapped yet so we swap it with the 4th element  the 3rd element was swapped already  the 4th element was swapped already  the 5th element wasnt swapped yet so we swap it with the 7th element  the 6th element wasnt swapped yet so we swap it with the 8th element So the array becomes 3 2 3 5 6 1 8 20 The subsegment with the maximum sum is 5 6 1 8 and the answer to the query is 18Note that the queries actually change the array ie after a query is performed the array does not return to its original state and the next query will be applied to the modified array