Tree and Permutation Game                    

https://codeforces.com/problemset/problem/1659/F

dfs and similar

3000

There is a tree of n vertices and a permutation p of size n. A token is present on vertex x of the tree.Alice and Bob are playing a game. Alice is in control of the permutation p, and Bob is in control of the token on the tree. In Alice's turn, she must pick two distinct numbers u and v (not positions; u \neq v), such that the token is neither at vertex u nor vertex v on the tree, and swap their positions in the permutation p. In Bob's turn, he must move the token to an adjacent vertex from the one it is currently on.Alice wants to sort the permutation in increasing order. Bob wants to prevent that. Alice wins if the permutation is sorted in increasing order at the beginning or end of her turn. Bob wins if he can make the game go on for an infinite number of moves (which means that Alice is never able to get a sorted permutation). Both players play optimally. Alice makes the first move.Given the tree, the permutation p, and the vertex x on which the token initially is, find the winner of the game.