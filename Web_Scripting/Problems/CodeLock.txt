Code Lock                    

https://codeforces.com/problemset/problem/1804/H

bitmasks

3300

Lara has a safe that is locked with a circle-shaped code lock that consists of a rotating arrow, a static circumference around the arrow, an input screen, and an input button.The circumference of the lock is split into k equal sections numbered from 1 to k in clockwise order. Arrow always points to one of the sections. Each section is marked with one of the first k letters of the English alphabet. No two sections are marked with the same letter.Due to the lock limitations, the safe's password is a string of length n that consists of first k letters of the English alphabet only. Lara enters the password by rotating the lock's arrow and pressing the input button. Initially, the lock's arrow points to section 1 and the input screen is empty. In one second she can do one of the following actions.   Rotate the arrow one section clockwise. If the arrow was pointing at section x < k it will now point at section x + 1. If the arrow was pointing at section k it will now point at section 1.  Rotate the arrow one section counter-clockwise. If the arrow was pointing at section x > 1 it will now point at section x - 1. If the arrow was pointing at section 1 it will now point at section k.  Press the input button. The letter marked on the section that the arrow points to will be added to the content of the input screen.  As soon as the content of the input screen matches the password, the safe will open. Lara always enters her password in the minimum possible time.Lara has recently found out that the safe can be re-programmed. She can take the first k letters of the English alphabet and assign them to the sectors in any order she likes. Now she wants to re-arrange the letters in a way that will minimize the number of seconds it takes her to input the password. Compute this minimum number of seconds and the number of ways to assign letters, for which this minimum number of seconds is achieved.Two ways to assign letters to sectors are considered to be distinct if there exists at least one sector i that is assigned different letters.