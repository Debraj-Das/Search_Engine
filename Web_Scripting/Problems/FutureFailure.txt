Future Failure                    

httpscodeforcescomproblemsetproblem838C

dp

2800

Alice and Bob are playing a game with a string of characters with Alice going first The string consists n characters each of which is one of the first k letters of the alphabet On a players turn they can either arbitrarily permute the characters in the words or delete exactly one character in the word if there is at least one character In addition their resulting word cannot have appeared before throughout the entire game The player unable to make a valid move loses the gameGiven nkp find the number of words with exactly n characters consisting of the first k letters of the alphabet such that Alice will win if both Alice and Bob play optimally Return this number modulo the prime number p