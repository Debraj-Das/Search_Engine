Synchrophasotron                    

httpscodeforcescomproblemsetproblem68C

brute force

2200

For some experiments little Petya needs a synchrophasotron He has already got the device all thats left is to set the fuel supply Fuel comes through a system of nodes numbered from 1 to n and connected by pipes Pipes go from every node with smaller number to every node with greater number Fuel can only flow through pipes in direction from node with smaller number to node with greater number Any amount of fuel can enter through the first node and the last node is connected directly to the synchrophasotron It is known that every pipe has three attributes the minimum amount of fuel that should go through it the maximum amount of fuel that can possibly go through it and the cost of pipe activation If cij units of fuel cij0 flow from node i to node j it will cost aijcij2 tugriks aij is the cost of pipe activation and if fuel doesnt flow through the pipe it doesnt cost anything Only integer number of units of fuel can flow through each pipeConstraints on the minimal and the maximal fuel capacity of a pipe take place always not only if it is active You may assume that the pipe is active if and only if the flow through it is strictly greater than zeroPetya doesnt want the pipe system to be overloaded so he wants to find the minimal amount of fuel that having entered the first node can reach the synchrophasotron Besides that he wants to impress the sponsors so the sum of money needed to be paid for fuel to go through each pipe must be as big as possible